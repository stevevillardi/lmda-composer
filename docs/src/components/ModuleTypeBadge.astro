---
import { Activity, FileText, Bell, Tag, Network, ScrollText, Stethoscope } from '@lucide/astro';

interface Props {
  type: 'datasource' | 'configsource' | 'eventsource' | 'propertysource' | 'topologysource' | 'logsource' | 'diagnosticsource';
  showLabel?: boolean;
}

const { type, showLabel = true } = Astro.props;

// Color and icon mapping matching src/editor/constants/logic-module-types.ts
const typeConfig = {
  datasource: {
    color: '#22c55e', // green-500 (Activity icon)
    label: 'DataSource'
  },
  configsource: {
    color: '#64748b', // slate-500 (FileText icon)
    label: 'ConfigSource'
  },
  eventsource: {
    color: '#f97316', // orange-500 (Bell icon)
    label: 'EventSource'
  },
  propertysource: {
    color: '#ec4899', // pink-500 (Tag icon)
    label: 'PropertySource'
  },
  topologysource: {
    color: '#06b6d4', // cyan-500 (Network icon)
    label: 'TopologySource'
  },
  logsource: {
    color: '#14b8a6', // teal-500 (ScrollText icon)
    label: 'LogSource'
  },
  diagnosticsource: {
    color: '#a855f7', // purple-500 (Stethoscope icon)
    label: 'DiagnosticSource'
  }
};

const config = typeConfig[type];
---

<span class="module-type-badge" style={`--badge-color: ${config.color};`}>
  <span class="badge-icon">
    {type === 'datasource' && <Activity size={14} />}
    {type === 'configsource' && <FileText size={14} />}
    {type === 'eventsource' && <Bell size={14} />}
    {type === 'propertysource' && <Tag size={14} />}
    {type === 'topologysource' && <Network size={14} />}
    {type === 'logsource' && <ScrollText size={14} />}
    {type === 'diagnosticsource' && <Stethoscope size={14} />}
  </span>
  {showLabel && <span class="badge-label">{config.label}</span>}
</span>

<style>
  .module-type-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.1875rem 0.5rem;
    border-radius: 9999px;
    background: color-mix(in srgb, var(--badge-color) 15%, transparent);
    color: var(--badge-color);
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
  }

  .badge-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .badge-label {
    line-height: 1.2;
  }
</style>
