---
import { Icon } from '@astrojs/starlight/components';

interface Props {
  type: 'datasource' | 'configsource' | 'eventsource' | 'propertysource' | 'topologysource' | 'logsource' | 'snmpsysoidmap';
  showLabel?: boolean;
}

const { type, showLabel = true } = Astro.props;

// Color and icon mapping matching src/editor/constants/icons.tsx
const typeConfig = {
  datasource: {
    color: '#22c55e', // green-500 (Activity icon)
    icon: 'heart-pulse',
    label: 'DataSource'
  },
  configsource: {
    color: '#64748b', // slate-500 (FileText icon)
    icon: 'document',
    label: 'ConfigSource'
  },
  eventsource: {
    color: '#f97316', // orange-500 (Bell icon)
    icon: 'bell',
    label: 'EventSource'
  },
  propertysource: {
    color: '#ec4899', // pink-500 (Tag icon)
    icon: 'tag',
    label: 'PropertySource'
  },
  topologysource: {
    color: '#06b6d4', // cyan-500 (Network icon)
    icon: 'random',
    label: 'TopologySource'
  },
  logsource: {
    color: '#14b8a6', // teal-500 (ScrollText icon)
    icon: 'list-format',
    label: 'LogSource'
  },
  snmpsysoidmap: {
    color: '#8b5cf6', // violet-500
    icon: 'seti:json',
    label: 'SnmpSysOIDMap'
  }
};

const config = typeConfig[type];
---

<span class="module-type-badge" style={`--badge-color: ${config.color};`}>
  <Icon name={config.icon} size="0.875rem" />
  {showLabel && <span class="badge-label">{config.label}</span>}
</span>

<style>
  .module-type-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.1875rem 0.5rem;
    border-radius: 9999px;
    background: color-mix(in srgb, var(--badge-color) 15%, transparent);
    color: var(--badge-color);
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
  }

  .badge-label {
    line-height: 1.2;
  }
</style>



