---
title: Variables & History
description: Use environment variables, JSON helpers, and review API request history.
---

import { Steps, Tabs, TabItem, Aside, Badge, LinkCard } from '@astrojs/starlight/components';
import { Icon } from '@astrojs/starlight/components';
import HttpMethodBadge from '../../../components/HttpMethodBadge.astro';

The API Explorer includes environment variables for reusable values, JSON path helpers to extract response data, and a history panel to review past requests.

## Environment Variables

### What Are Variables?

Variables let you store and reuse values across requests:

```
/device/devices/{{deviceId}}
```

Instead of hardcoding IDs, use variables that can be changed in one place.

### Variable Syntax

Use double curly braces:

```
{{variableName}}
```

Variables work in:
- Endpoint paths
- Query parameter values
- Request body
- Header values

---

### Managing Variables

Access variables in the right sidebar under the **Variables** tab:

- **Add Variable** — Click **Add** and enter key/value pair
- **Edit Variable** — Click the variable value to edit inline
- **Delete Variable** — Click the **×** button to remove
- **Copy Syntax** — Click the copy icon to copy `{{variableName}}` syntax

### Variable Properties

Each variable has:

| Property | Description |
|----------|-------------|
| **Key** | Variable identifier (no spaces allowed) |
| **Value** | The substituted value |

---

### Example Variables

Common variables to create:

| Variable | Example Value | Use Case |
|----------|---------------|----------|
| `deviceId` | `12345` | Target device for operations |
| `collectorId` | `1` | Collector reference |
| `groupId` | `42` | Device group operations |
| `datasourceId` | `78` | Module operations |
| `startTime` | `1704067200` | Time range start (epoch) |
| `endTime` | `1704153600` | Time range end (epoch) |

---

### Variable Substitution

When you send a request:

<Steps>

1. Variables are identified by `{{name}}` pattern

2. Values are substituted from your variable list

3. The final request uses resolved values

4. Original template is preserved for editing

</Steps>

<Aside type="caution" title="Unresolved Variables">
  If a variable isn't defined, the literal `{{name}}` is sent, which usually causes an API error. Check the Variables tab for typos.
</Aside>

---

## JSON Path Helpers

The **Helpers** tab provides a quick way to save response values as variables.

### How Helpers Work

After running a request, the Helpers tab shows top-level scalar fields from the response:

| Field | Description |
|-------|-------------|
| **JSON Path** | The path to the value (e.g., `$.id`, `$.displayName`) |
| **Copy** | Copy the JSON path to clipboard |
| **Save** | Save the value as an environment variable |

### Using Helpers

<Steps>

1. Run an API request that returns a single resource

2. Open the **Helpers** tab in the sidebar

3. Find the field you want to save (e.g., `$.id`)

4. Click **Save** to create a variable with that value

5. Use the variable in subsequent requests: `{{id}}`

</Steps>

<Aside type="note" title="Single Resource Responses">
  Helpers show for single-resource responses only. For list responses (with `items` array), use the JSON viewer to find specific values.
</Aside>

---

## Request History

<img src="/lmda-composer/api-explorer/api-history.png" alt="History sidebar showing past API requests" style="border-radius: 0.5rem; margin: 1.5rem 0;" />

### Automatic History

Every API request is saved to history:

- Request method and endpoint
- Request body (if applicable)
- Response status
- Timestamp
- Duration

### Accessing History

Open the **History** tab in the right sidebar to see past requests. The header shows "Last N responses" where N is your configured limit.

---

### History Entry Details

Each entry shows:

| Field | Description |
|-------|-------------|
| **Method Badge** | <HttpMethodBadge method="GET" size="sm" />, <HttpMethodBadge method="POST" size="sm" />, etc. |
| **Endpoint** | The API path called |
| **Status** | Response status code with color indicator |
| **Duration** | How long it took (e.g., "234ms") |

Entries have a colored left border: green for success (2xx), red for errors.

---

### History Actions

Click a history entry to access actions:

| Action | Result |
|--------|--------|
| **Open in New Tab** | Opens the request in a new API tab with the saved response |
| **Copy Path** | Copies the endpoint path |

### Reloading Past Requests

<Steps>

1. Find the request in history

2. Click the open button (route icon)

3. Request opens in a new tab with the saved response

4. Modify parameters if needed

5. Send again

</Steps>

---

### History Settings

History is stored per-portal with configurable limits:

| Setting | Location | Default |
|---------|----------|---------|
| **History Limit** | Settings → API History Limit | 10 requests |

Configure in **Settings** (<kbd>Ctrl</kbd>+<kbd>,</kbd> / <kbd>Cmd</kbd>+<kbd>,</kbd>).

### Clearing History

1. Click **Clear** at the top of the history panel
2. All history entries for the current portal are removed

---

## Code Snippets

The Response Viewer's **Snippets** tab generates code for the current request in multiple languages:

| Language | Use Case |
|----------|----------|
| **cURL** | Command-line testing, shell scripts |
| **Python** | Automation scripts with `requests` library |
| **PowerShell** | Windows automation with `Invoke-RestMethod` |
| **Groovy** | LogicMonitor script integration |

Snippets include:
- Full URL with resolved variables
- Headers (including X-version and Content-Type)
- Request body (for POST/PUT/PATCH)

---

## Workflow Examples

<Tabs>
  <TabItem label="Save & Reuse ID" icon="setting">
    **Workflow for creating a resource and using its ID:**

    <Steps>

    1. Create a device: <HttpMethodBadge method="POST" size="sm" /> `/device/devices`

    2. View the response and note the `id` field

    3. Open **Helpers** tab and click **Save** next to `$.id`

    4. Variable `id` is now available

    5. Use in subsequent requests: `/device/devices/{{id}}`

    </Steps>
  </TabItem>
  
  <TabItem label="Time Range Queries" icon="history">
    **Variables for time-based queries:**

    | Variable | Value |
    |----------|-------|
    | `startTime` | `1704067200` (epoch timestamp) |
    | `endTime` | `1704153600` |
    | `deviceId` | `12345` |

    **Request:**
    ```
    GET /device/devices/{{deviceId}}/devicedatasources/{{datasourceId}}/data
        ?start={{startTime}}
        &end={{endTime}}
    ```

    Update time variables to query different periods.
  </TabItem>
  
  <TabItem label="Request Sequences" icon="list-format">
    Create sequences of related requests:

    <Steps>

    1. **Create device**: <HttpMethodBadge method="POST" size="sm" /> `/device/devices`

    2. **Save ID**: Use Helpers to save `$.id` as `deviceId`

    3. **Add properties**: <HttpMethodBadge method="PATCH" size="sm" /> `/device/devices/{{deviceId}}`

    4. **Verify**: <HttpMethodBadge method="GET" size="sm" /> `/device/devices/{{deviceId}}`

    </Steps>

    Each request uses the variable from the previous step.
  </TabItem>
</Tabs>

---

## Best Practices

- **Variable Naming** — Use clear names like `targetDeviceId` instead of `id1`. Prefix by purpose: `test_deviceId`, `prod_deviceId`.
- **Organizing Variables** — Keep your variable list clean by removing unused ones. Use descriptive names that indicate the value's purpose.
- **History Management** — Use history to quickly repeat recent requests. Open in new tab to compare before/after results.
- **Security** — Variables are stored locally in your browser. Don't store sensitive credentials. Clear when switching computers.

<Aside type="tip" title="Variable Tips">
  - Use descriptive names: `targetDeviceId` not `id1`
  - Use Helpers to quickly save response values as variables
  - Variables persist per-portal, so different portals have separate variable sets
</Aside>

---

## Next Steps

<LinkCard
  title="Module Management"
  description="Learn about editing module details and committing changes."
  href="/lmda-composer/module-management/module-details/"
/>
